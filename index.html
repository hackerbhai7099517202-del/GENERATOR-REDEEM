<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biswajit Hacker Panel üîê</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
    <style>
        body { background: #000; color: #0f0; text-align: center; font-family: 'Courier New', monospace; padding-top: 50px; }
        .box { border: 2px solid #0f0; display: inline-block; padding: 20px; border-radius: 10px; background: #111; width: 90%; max-width: 400px; }
        input { background: #222; color: #0f0; border: 1px solid #0f0; padding: 12px; margin: 10px 0; width: 90%; border-radius: 5px; }
        button { background: #0f0; color: #000; border: none; padding: 12px 25px; font-weight: bold; cursor: pointer; border-radius: 5px; width: 95%; }
        #genBtn { background: #ff0000; color: #fff; margin-top: 20px; padding: 20px; font-size: 18px; display: none; }
        #result { font-size: 25px; margin-top: 20px; color: gold; font-weight: bold; word-wrap: break-word; }
        .status { color: #888; font-size: 12px; margin-top: 10px; }
    </style>
</head>
<body>

    <div class="box">
        <h2>ADMIN SYSTEM LOCK üîê</h2>
        
        <div id="loginSection">
            <input type="email" id="email" placeholder="Email (hgchatts@gmail.com)">
            <input type="password" id="pass" placeholder="Password">
            <button onclick="login()">ENTER SYSTEM</button>
            <p class="status">‡§®‡•ã‡§ü: ‡§Ö‡§™‡§®‡•Ä Firebase API Key ‡§ï‡•ã‡§° ‡§Æ‡•á‡§Ç ‡§ú‡§º‡§∞‡•Ç‡§∞ ‡§°‡§æ‡§≤‡•á‡§Ç‡•§</p>
        </div>

        <div id="adminSection" style="display:none;">
            <p style="color:white;">Welcome, Master Biswajit!</p>
            <button id="genBtn" onclick="generateCode()">GENERATE REDEEM CODE</button>
            <div id="result">----</div>
        </div>
    </div>

    <script>
        // *** ‡§Ø‡§π‡§æ‡§Å ‡§Ö‡§™‡§®‡•Ä ‡§Ö‡§∏‡§≤‡•Ä Firebase ‡§°‡§ø‡§ü‡•á‡§≤‡•ç‡§∏ ‡§≠‡§∞‡•á‡§Ç ***
        const firebaseConfig = {
            apiKey: "GV2pjlcVrZdXEBOwtSxXWpCzO6D3", // <--- ‡§Ø‡§π‡§æ‡§Å ‡§Ö‡§™‡§®‡•Ä API KEY ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç
            authDomain: "biswajit-rabha-hacker-panel.firebaseapp.com",
            databaseURL: "https://biswajit-rabha-hacker-panel-default-rtdb.firebaseio.com/",
            projectId: "biswajit-rabha-hacker-panel",
            storageBucket: "biswajit-rabha-hacker-panel.appspot.com",
            messagingSenderId: "7099517202", 
            appId: "1:7099517202:web:your_app_id"
        };
        
        firebase.initializeApp(firebaseConfig);

        // Login Function
        function login() {
            const email = document.getElementById("email").value;
            const password = document.getElementById("pass").value;
            
            if(!email || !password) { alert("Please enter details"); return; }

            firebase.auth().signInWithEmailAndPassword(email, password)
            .then((userCredential) => {
                const user = userCredential.user;
                // UID CHECK: gV2pjlcVrZdXEBOwtSxXWpCzO6D3
                if(user.uid === 'gV2pjlcVrZdXEBOwtSxXWpCzO6D3') {
                    document.getElementById("loginSection").style.display = "none";
                    document.getElementById("adminSection").style.display = "block";
                    document.getElementById("genBtn").style.display = "inline-block";
                } else {
                    alert("Unauthorized UID! Access Denied.");
                }
            })
            .catch((error) => {
                alert("Login Error: " + error.message);
            });
        }

        // Generate Code Function
        async function generateCode() {
            const user = firebase.auth().currentUser;
            if(!user || user.uid !== 'gV2pjlcVrZdXEBOwtSxXWpCzO6D3') {
                alert("SYSTEM LOCKED!"); return;
            }

            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
            let randomCode = '';
            for (let i = 0; i < 8; i++) {
                randomCode += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            const finalCode = "BR-" + randomCode;

            try {
                await firebase.database().ref('redeem_codes/' + finalCode).set({
                    code: finalCode,
                    amount: 100,
                    isUsed: false,
                    timestamp: firebase.database.ServerValue.TIMESTAMP
                });
                document.getElementById("result").innerText = finalCode;
                alert("Success! Code Saved in Database.");
            } catch (err) {
                alert("Database Error: Rules blocked the request.");
            }
        }
    </script>
</body>
</html>
